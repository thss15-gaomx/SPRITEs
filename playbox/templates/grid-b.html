{% extends 'base.html' %}
{% block content %}
<div class="ui container">
  <div class="ui large secondary inverted pointing menu">
    <a href="{% url 'index' %}" class="item" id='home'>Home</a>
    <a href="{% url 'playbox' %}" class="item" id='plan-a'>Playbox</a>
  </div>
</div>
  <div class="ui inverted vertical masthead segment grid-page" style="background: #FAFAFA;">
    <table border="1" class="grid-table">
      <tr class="page1">
        <td width="10%" id="0-0"> 　</td>
        <td width="10%" id="0-1"> 　</td>
        <td width="10%" id="0-2"> 　</td>
        <td width="10%" id="0-3"> 　</td>
        <td width="10%" id="0-4"> 　</td>
        <td width="10%" id="0-5"> 　</td>
        <td width="10%" id="0-6"> 　</td>
        <td width="10%" id="0-7"> 　</td>
        <td width="10%" id="0-8"> 　</td>
        <td width="10%" id="0-9"> 　</td>
      </tr>
      <tr>
        <td width="10%" id="1-0"> 　</td>
        <td width="10%" id="1-1"> 　</td>
        <td width="10%" id="1-2"> 　</td>
        <td width="10%" id="1-3"> 　</td>
        <td width="10%" id="1-4"> 　</td>
        <td width="10%" id="1-5"> 　</td>
        <td width="10%" id="1-6"> 　</td>
        <td width="10%" id="1-7"> 　</td>
        <td width="10%" id="1-8"> 　</td>
        <td width="10%" id="1-9"> 　</td>
      </tr>
      <tr>
        <td width="10%" id="2-0"> 　</td>
        <td width="10%" id="2-1"> 　</td>
        <td width="10%" id="2-2"> 　</td>
        <td width="10%" id="2-3"> 　</td>
        <td width="10%" id="2-4"> 　</td>
        <td width="10%" id="2-5"> 　</td>
        <td width="10%" id="2-6"> 　</td>
        <td width="10%" id="2-7"> 　</td>
        <td width="10%" id="2-8"> 　</td>
        <td width="10%" id="2-9"> 　</td>
      </tr>
      <tr>
        <td width="10%" id="3-0"> 　</td>
        <td width="10%" id="3-1"> 　</td>
        <td width="10%" id="3-2"> 　</td>
        <td width="10%" id="3-3"> 　</td>
        <td width="10%" id="3-4"> 　</td>
        <td width="10%" id="3-5"> 　</td>
        <td width="10%" id="3-6"> 　</td>
        <td width="10%" id="3-7"> 　</td>
        <td width="10%" id="3-8"> 　</td>
        <td width="10%" id="3-9"> 　</td>
      </tr>
      <tr class="page2">
        <td width="10%" id="4-0"> 　</td>
        <td width="10%" id="4-1"> 　</td>
        <td width="10%" id="4-2"> 　</td>
        <td width="10%" id="4-3"> 　</td>
        <td width="10%" id="4-4"> 　</td>
        <td width="10%" id="4-5"> 　</td>
        <td width="10%" id="4-6"> 　</td>
        <td width="10%" id="4-7"> 　</td>
        <td width="10%" id="4-8"> 　</td>
        <td width="10%" id="4-9"> 　</td>
      </tr>
      <tr>
        <td width="10%" id="5-0"> 　</td>
        <td width="10%" id="5-1"> 　</td>
        <td width="10%" id="5-2"> 　</td>
        <td width="10%" id="5-3"> 　</td>
        <td width="10%" id="5-4"> 　</td>
        <td width="10%" id="5-5"> 　</td>
        <td width="10%" id="5-6"> 　</td>
        <td width="10%" id="5-7"> 　</td>
        <td width="10%" id="5-8"> 　</td>
        <td width="10%" id="5-9"> 　</td>
      </tr>
      <tr>
        <td width="10%" id="6-0"> 　</td>
        <td width="10%" id="6-1"> 　</td>
        <td width="10%" id="6-2"> 　</td>
        <td width="10%" id="6-3"> 　</td>
        <td width="10%" id="6-4"> 　</td>
        <td width="10%" id="6-5"> 　</td>
        <td width="10%" id="6-6"> 　</td>
        <td width="10%" id="6-7"> 　</td>
        <td width="10%" id="6-8"> 　</td>
        <td width="10%" id="6-9"> 　</td>
      </tr>
      <tr>
        <td width="10%" id="7-0"> 　</td>
        <td width="10%" id="7-1"> 　</td>
        <td width="10%" id="7-2"> 　</td>
        <td width="10%" id="7-3"> 　</td>
        <td width="10%" id="7-4"> 　</td>
        <td width="10%" id="7-5"> 　</td>
        <td width="10%" id="7-6"> 　</td>
        <td width="10%" id="7-7"> 　</td>
        <td width="10%" id="7-8"> 　</td>
        <td width="10%" id="7-9"> 　</td>
      </tr>
      <tr class="page3">
        <td width="10%" id="8-0"> 　</td>
        <td width="10%" id="8-1"> 　</td>
        <td width="10%" id="8-2"> 　</td>
        <td width="10%" id="8-3"> 　</td>
        <td width="10%" id="8-4"> 　</td>
        <td width="10%" id="8-5"> 　</td>
        <td width="10%" id="8-6"> 　</td>
        <td width="10%" id="8-7"> 　</td>
        <td width="10%" id="8-8"> 　</td>
        <td width="10%" id="8-9"> 　</td>
      </tr>
      <tr>
        <td width="10%" id="9-0"> 　</td>
        <td width="10%" id="9-1"> 　</td>
        <td width="10%" id="9-2"> 　</td>
        <td width="10%" id="9-3"> 　</td>
        <td width="10%" id="9-4"> 　</td>
        <td width="10%" id="9-5"> 　</td>
        <td width="10%" id="9-6"> 　</td>
        <td width="10%" id="9-7"> 　</td>
        <td width="10%" id="9-8"> 　</td>
        <td width="10%" id="9-9"> 　</td>
      </tr>
      <tr>
        <td width="10%" id="10-0"> 　</td>
        <td width="10%" id="10-1"> 　</td>
        <td width="10%" id="10-2"> 　</td>
        <td width="10%" id="10-3"> 　</td>
        <td width="10%" id="10-4"> 　</td>
        <td width="10%" id="10-5"> 　</td>
        <td width="10%" id="10-6"> 　</td>
        <td width="10%" id="10-7"> 　</td>
        <td width="10%" id="10-8"> 　</td>
        <td width="10%" id="10-9"> 　</td>
      </tr>
      <tr>
        <td width="10%" id="11-0"> 　</td>
        <td width="10%" id="11-1"> 　</td>
        <td width="10%" id="11-2"> 　</td>
        <td width="10%" id="11-3"> 　</td>
        <td width="10%" id="11-4"> 　</td>
        <td width="10%" id="11-5"> 　</td>
        <td width="10%" id="11-6"> 　</td>
        <td width="10%" id="11-7"> 　</td>
        <td width="10%" id="11-8"> 　</td>
        <td width="10%" id="11-9"> 　</td>
      </tr>
    </table>
  </div>

  <script type="text/javascript" src="/static/jquery-buzz.js"></script>
  <script type="text/javascript" src="/static/sound.js"></script>
  <script type="text/javascript">
    var utterThis = new window.SpeechSynthesisUtterance();
    utterThis.text = 'set the shape and postion of your widget';
    utterThis.lang = 'en';
    window.speechSynthesis.speak(utterThis);
    var curColumn = 0, curRow = 0
    var curColor = 0;
    var curPage = 1;
    var colorMap = ["#B03060", "#FE9A76", "#FFD700", "#32CD32", "#016936", "#008080",
              "#0E6EB8", "#EE82EE", "#B413EC", "#FF1493", "#A52A2A", "#A0A0A0", "#000000"];
    var columnKey = [49, 50, 51, 52, 53, 54, 55, 56, 57, 48,
                     81, 87, 69, 82, 84, 89, 85, 73, 79, 80,
                     65, 83, 68, 70, 71, 72, 74, 75, 76, 186,
                     90, 88, 67, 86, 66, 78, 77, 188, 190, 191];
    var rowKey = [192, 9, 20, 16] // ``, tab, caps lock, shift
    var focus = "null";  //null, row, column, both
    var shift = 0; // right or left shift
    document.addEventListener("keydown", function(e){
      shift = e.location;
    });
    $(document).keydown(function (event) {
      playMoveSound();
      event.preventDefault();
      if (event.keyCode === 37) {   // left
        if (curColumn > 0) {
          curColumn--;
        }
      } else if (event.keyCode === 39) { // right
        if (curColumn < 9) {
          curColumn++;
        }
      } else if (event.keyCode === 38) {   // up
        if (curRow > 0) {
          curRow--;
        }
      } else if (event.keyCode === 40) { // down
        if (curRow < 11) {
          curRow++;
        }
      } else if (event.keyCode === 32) {   // space: set position
        if (focus === "both") {
          var curId = "#" + curRow.toString() + "-" + curColumn.toString();
          $(curId).css("background-color", colorMap[curColor]);
          utterThis.text = "row " + (curRow + 1).toString() + "column" + (curColumn + 1).toString();
          window.speechSynthesis.speak(utterThis);
        }
      } else if (event.keyCode === 220) {  // \: enter
        utterThis.text = "alter color";
        window.speechSynthesis.speak(utterThis);
        curColor = (curColor + 1) % 13;
      } else if (event.keyCode === 13) {  // enter: page up
        if (curPage > 1) {
          curPage--;
        }
        utterThis.text = "page " + (curPage).toString();
        window.speechSynthesis.speak(utterThis);
        var pageClass = ".page" + (curPage).toString();
        $('html, body').animate({
          scrollTop: $(pageClass).offset().top
        }, 500);
      } else if (event.keyCode === 16 && shift === 2) {  // shift: page down
        if (curPage < 3) {
          curPage++;
        }
        utterThis.text = "page " + (curPage).toString();
        window.speechSynthesis.speak(utterThis);
        var pageClass = ".page" + (curPage).toString();
        $('html, body').animate({
          scrollTop: $(pageClass).offset().top
        }, 500);
        shift = 0;
      } else if (columnKey.indexOf(event.keyCode) >= 0) {  // column keys
        curColumn = (columnKey.indexOf(event.keyCode) + 1) % 10;
        if (curColumn === 0) {
          curColumn = 9;
        } else {
          curColumn -= 1;
        }
        utterThis.text = "column " + (curColumn + 1).toString();
        window.speechSynthesis.speak(utterThis);
        if (focus === "null" || focus === "both") {
          focus = "column";
        } else if (focus === "row") {
          focus = "both";
        }
      } else if (rowKey.indexOf(event.keyCode) >= 0 && shift !== 2) {  // row keys
        curRow = rowKey.indexOf(event.keyCode) + (curPage - 1) * 4;
        utterThis.text = "row " + (curRow + 1).toString();
        window.speechSynthesis.speak(utterThis);
        if (focus === "null" || focus === "both") {
          focus = "row";
        } else if (focus === "column") {
          focus = "both";
        }
      } else if (event.keyCode === 27) { // Esc
        window.location.href = "{% url 'index' %}";
      }
    });
  </script>
{% endblock %}
