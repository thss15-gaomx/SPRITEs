{% extends 'base.html' %}
{% block content %}
  <div class="ui container">
    <div class="ui large secondary inverted pointing menu">
      <a href="{% url 'index' %}" class="item">Home</a>
      <a href="{% url 'select' %}" class="active item">PlanA</a>
      <a href="{% url 'select' %}" class="item">PlanB</a>
    </div>
  </div>
  <div class="ui inverted vertical masthead segment">
    {% if type == "pic" %}
      <div class="text-block">{{ content }}</div>
    {% endif %}
    {% if type == "pic" %}
      <div class="pic-block">
        <img src=".{{ pic.content.url }}"><br/>
      </div>
    {% endif %}
    <table border="1" class="grid-table">
      {#      <td width="25% " rowspan="2"> 　</td>#}
      {#      <td width="25% " colspan="2"> 　</td>#}
      <tr>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
      </tr>
      <tr>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
      </tr>
      <tr>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
      </tr>
      <tr>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
      </tr>
      <tr>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
        <td width="10%"> 　</td>
      </tr>
    </table>
    <div class="ui center aligned container">
      <br><br>
      <button type="submit" class="ui huge teal button" href="{% url 'grid' %}"><i class="send icon"></i>Confirm
      </button>
      <a class="ui huge inverted orange basic button" href="{% url 'select' %}">Back</a>
    </div>
  </div>

  <script type="text/javascript" src="/static/jquery-buzz.js"></script>
  <script type="text/javascript" src="/static/sound.js"></script>
  <script type="text/javascript">
    var blockWidth = parseInt({{ width }});
    var blockHeight = parseInt({{ height }});
    var type = "{{ type }}";
    if (type === "text") {
      $(".text-block").css("width", (blockWidth * 10).toString() + "vw");
      $(".text-block").css("height", "calc(" + (blockHeight * 20).toString() + "vh - " + (blockHeight * 44).toString() + "px)");
      $(".text-block").css("font-size", "{{ font_size }}");
      $(".text-block").css("color", "{{ font_color }}");
      $(".text-block").css("background-color", "{{ block_color }}");
    }
    var curRow = 0, curColumn = 0;
    var margin;
    $(document).keydown(function (event) {
      {#      var left = $(".text-block").css("margin-left");#}
      {#      left = parseFloat(left.slice(0, -2));#}
      var unitWidth = $(".grid-table").width() / 10;
      var unitHeight = $(".grid-table").height() / 5;
      playMoveSound();
      if (event.keyCode == 37) {   // left
        if (curColumn > 0) {
          curColumn--;
          margin = (curColumn * unitWidth).toString() + 'px';
          $(".text-block").css("margin-left", margin);
        }
      } else if (event.keyCode == 39) { // right
        if (curColumn + blockWidth < 10) {
          curColumn++;
          margin = (curColumn * unitWidth).toString() + 'px';
          $(".text-block").css("margin-left", margin);
        }
      } else if (event.keyCode == 38) {   // up
        if (curRow > 0) {
          curRow--;
          margin = (curRow * unitHeight + 20).toString() + 'px';
          $(".text-block").css("margin-top", margin);
        }
      } else if (event.keyCode == 40) { // down
        if (curRow + blockHeight < 5) {
          curRow++;
          margin = (curRow * unitHeight + 20).toString() + 'px';
          $(".text-block").css("margin-top", margin);
        }
      }
    });
  </script>
{% endblock %}

